# ymt-node-signature
---
洋码头Node站点签名中间件

## Install
```bash
$ npm install ymt-node-signature
```
## 算法
根据参数名称的ASCII码表的顺序排序

### 参数
```bash
公共参数(必填,http header 中)
1.app_key
2.app_version
3.deviceid
4.accept-version
5.timestamp(单位毫秒)

各业务参数
    1....
    2....
    ....
```

### 例子
```bash
Headers参数如下
app_key=123
app_version=2.6.5
deviceid=1234567890
ymt_pars=accesstoken=abc&format=json&idfa=idfa123&imei=imei123&network=wifi&client=ios
timestamp=1460094238536
sign=ff907782b6e13aa664c9b8722e6063e4

根据ASCII码表的顺序排序得到的结果是：accept-versionapp_key123app_version2.6.5deviceid1234567890timestamp1460094238536
```

### MD5签名
在排序得到的结果,前后加上secret后进行签名
```bash
md5(secret+accept-versionapp_key123app_version2.6.5deviceid1234567890timestamp1460094238536+secret)
```

### 其他说明
1.编码格式统一为UTF-8格式
2.secret会统一分配
3.如传参为JsonObject,value为array或者Object统一按照JSON.stringify做字符转换进行加密运算
4.如get方式请求,参数值为数组则按?x[0]=1&x[1]=11&x[2]=222方式请求