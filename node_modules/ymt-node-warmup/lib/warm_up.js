var assert = require('assert');

//兼容 express、restify
module.exports = function (server, warmFun) {
  assert(server, 'server is undefined?');

  var warmUp = function (req, res) {
    if (warmFun && typeof warmFun == 'function') {
      warmFun(function (err) {
        if (err) {
          res.send({"string": err.message});
        }
        else {
          res.send('ok');
        }
      })
    }
    else {
      res.send('ok');
    }
  };
  //注册路由
  server.get('/warmup', warmUp);
  server.post('/warmup', warmUp);
};